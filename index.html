<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Study Group Finder</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="icons/favicon-group.png" type="image/png" sizes="16x16">
<link rel="stylesheet" href="css/main.css">
<style>
body {
  background-color: #F8F8F8;
  font-family: Helvetica, sans-serif;
}

/*** HEADER ***/
/* Style the tab */
.tab {
  background-color: #222222;
  overflow: hidden;
  position: fixed;
  width: 100%;
  top: 0;
  z-index: 1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

#logo {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  padding: 8px 16px 0px;
  font-size: 17px;
}

#logout {
    float: right;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #F8F8F8;
}

.tab button:hover .icons{
  filter: none;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #F8F8F8;
}

.tab button.active .icons{
  filter: none;
}

/*** BODY ***/
/* Style the tab content */
.tabcontent {
  display: none;
  margin: 82px 0 50px 20px;
  padding: 6px 12px;
  border-radius: 10px;
  color:#44403f;
  background-color: #F8F8F8;
  border-top-right-radius: 0px;
  border-top-left-radius: 0px;
  animation: fadeEffect 1s; /* Fading effect takes 1 second */
}

/* Style the collapsible */
.collapsible {
  border: none;
  color: #F8F8F8;
  background-color: #696965;
  cursor: pointer;
  margin: 8px 0;
  width: 100%;
  text-align: left;
  font-size: medium;
  font-weight: bold;
  letter-spacing: 1pt;
  padding: 12px  20px;
  border-radius: 12px;
  box-sizing: border-box;
}

/* Change background color of collapsible button when active and on hover*/
/*.active,*/
.collapsible:hover {
  background-color: #ba2026;
  //color: black;
}

/* Style the content of the collapsible */
.collapsiblecontent {
  color: #44403f;
  //background-color: #696965;
  padding: 0 18px;
  border-radius: 10px;
  border: 1px solid #ae946d;
  display: none;
  overflow: hidden;
}

/* Style search result table */
table{
  margin: 10 auto;
  border-collapse: collapse;
  width: 100%;
}

td {
  //border: 1px solid #ae946d;
  background-color: white;
  text-align: center;
  padding: 16px;
}

th {
  //border: 1px solid #ae946d;
  background-color: #696965;
  color: #F8F8F8;
  text-align: center;
  padding: 16px;
}

/* Style clickable group name */
button.group {
  cursor: pointer;
  color: #44403f;
  background-color: white;
  border: none;
  font-size: 12pt;
  background:none;
  border:none;
}

/* Style clickable group member name */
button.members{
  cursor: pointer;
  font-size: 12pt;
  color: #44403f;
  background-color: #F8F8F8;
  border: none;
}

button.members:hover {
  color: #ba2026;
}

/* Underline group name on hover*/
button.group:hover {
  color: #ba2026;
}

/* The Modal (background) */
.modal {
  display: none;
  position: fixed; 
  z-index: 1; 
  left: 0;
  top: 0;
  width: 100%; 
  height: 100%; 
  overflow: auto;
  background-color: rgb(0,0,0); 
  background-color: rgba(0,0,0,0.4);
  padding-top: 100px;
}

/* Modal Content/Box */
.modal-content {
  border-radius: 12px;
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button (x) */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: red;
  text-decoration: none;
  cursor: pointer;
}

#submitRequest{
  background-color: #4CAF50;
  color: #F8F8F8;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  width: 100%;
}

#submitRequest:hover {
  opacity: 0.8;
}

select{
  border-radius: 10px; 
  width: 500px;
  padding: 12px  20px;
  margin: 8px 0;
  box-sizing: border-box;
  background-color: #FEFEFE;
  color: #44403f;
  border:1px solid #ae946d;
}

input {
  border-radius: 12px;
  font-family: Helvetica, sans-serif;
  font-size: 16px;
  margin: 8px 0;
  padding: 12px  20px;
}

input[type=button], input[type=submit], input[type=reset] {
  border: none;
  font-weight: bold;
  font-size: medium;
  letter-spacing: 1pt;
  color: #F8F8F8;
  background-color: #222222;
}

input[type=button]:hover, input[type=button].active, input[type=submit]:hover, input[type=reset]:hover, .chat-button:hover {
  border: none;
  background-color: #ba2026;
  color: #F8F8F8;
  cursor: pointer;
}

.flex-container {
  flex-wrap: wrap;
  display: flex;
}

.sidebar{
  display: block;
  flex-basis: 20%;
  height: 100%;
  padding-top: 20px;
  padding-right: 20px;
}

button.standard {
  border-radius: 10px;
  font-family: Helvetica, sans-serif;
  font-size: 16px;
  margin: 8px 0;
  padding: 12px  20px;
  border: none;
  font-weight: bold;
  font-size: medium;
  letter-spacing: 1pt;
  color: #F8F8F8;
  background-color: #222222;
}

button.standard:hover {
  border: none;
  background-color: #ba2026;
  color: #F8F8F8;
  cursor: pointer;
}

#createNewDate {
  border-radius: 10px;
  font-family: Helvetica, sans-serif;
  font-size: 16px;
  margin: 8px 0;
  margin-top: 20px;
  padding: 12px  20px;
  border: none;
  font-weight: bold;
  font-size: medium;
  letter-spacing: 1pt;
  color: #F8F8F8;
  background-color: #222222;
}

#createNewDate:hover {
  border: none;
  background-color: #ba2026;
  color: #F8F8F8;
  cursor: pointer;
}

#addDate, #addFile {
  width: 100%;
  margin: 0;
  margin-top: 8px;
  padding: 12px 0;
}

.chat{
  border-radius: 12px;
  display: block;
  flex-basis: 60%;
  height: 100%;
  padding: 20px;
  padding-top: 0px;
  margin-top: 0px;
}

.sidebar-header {
  font-weight: bolder;
  font-weight: 700;
  font-size: larger;
}

.sidebar-item{
  text-align: center;
  line-height: 40px;
  border-radius: 10px;
  border: 1px solid #ae946d;
  margin: 20px;
  margin-left: 0;
  padding: 5px;
}

ol {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.container {
  background-color: #FEFEFE;
  color: #44403f;
  border-radius: 5px;
  padding: 10px;
  margin: 10px 0;
}

.darker {
  background-color: #e6ded2;
  color: #44403f;
}

.chat-text{
  background-color: #FEFEFE;
  border:1px solid #ae946d;
  border-radius: 10px;
  margin-top: 0px;
  margin-right: 10px;
  flex-basis: 75%;
  height: 40px;
}

.chat-button{
  background-color: #222222;
  border-radius: 10px;
  border: none;
  color: #F8F8F8;
  letter-spacing: 1pt;
  font-weight: bold;
  margin-top: 0px;
  flex-basis: 20%;
  height: 40px;
  cursor: pointer;
}

.chat-messages {
  max-height: 600px;
  overflow-y: scroll;
}

.group-header{
  flex-basis: 90%;
  align-self: center;
}

.settings-icon{
  padding-top: 10px;
}

.settings-icon:hover {
  color: red;
  cursor: pointer;
}

.newmessage{
  display: none;
}

.groupinput {
    width: 500px;
}

/* Go from zero to full opacity */
@keyframes fadeEffect {
  from {opacity: 0;}
  to {opacity: 1;}
}

fieldset {
    border: 1px solid #ae946d;
    border-radius: 12px;
    color: #44403f;
    display: none;
    float:left;
    margin: 10px;
    width: 220px;
}

.btn_delete {
    float: right;
}

#joinedgroups {
    color: #44403f;
    border: 2px solid;
    border-radius: 10px;
    padding: 10px;
    width: 50%;
}

.joined_group {
    color: #44403f;
    background-color: white;
    border: 1px solid #696965;
    cursor: pointer;
    height: 60px;
    margin: 10px;
    padding: 10px;
    border-radius: 10px;
}

.joined_group:hover {
    background-color: #e6ded2;
}

.joined_group_name {
    display: inline-block;
    float:left;
    margin:10px;
}

.joined_group_img {
    display: inline-block;
    float:right;
    height:32px;
    width:32px;
}

.joined_group_img:hover{
  filter: invert(19%) sepia(94%) saturate(2647%) hue-rotate(343deg) brightness(79%) contrast(95%);
}

.add_date_button {
  border: none;
  background-color: #F8F8F8;
  height:32px;
  max-width: 32px;
}

.add_date_button:active {
  border: none;
}

.add_date_img {
    display: inline-block;
    height:32px;
    width:32px;
}

.add_date_img:hover{
  filter: invert(19%) sepia(94%) saturate(2647%) hue-rotate(343deg) brightness(79%) contrast(95%);
}

.request {
  height:150px;
  width:100%;
  margin-top:15px;
  margin-bottom:15px;
  overflow:auto;
  resize:vertical" 
}

.icons {
  filter:invert(99%) sepia(2%) saturate(358%) hue-rotate(181deg) brightness(117%) contrast(95%);
}

.cat-icon {
  width:25px;
  height:25px;
  filter: invert(41%) sepia(8%) saturate(172%) hue-rotate(22deg) brightness(97%) contrast(91%);
}

.requestmenu {
    display: inline-block;
    min-height: 650px;
    max-height: 650px;
    overflow-y: scroll;
    width: 30%;
}

.requestitem {
    border: 1px solid #696965;
    border-radius: 12px;
    //background-color:#F8F8F8;
    background-color: white;
    cursor: pointer;
    margin: 20px;
    padding: 20px;
    white-space: normal;
}

.requestitem:hover, .requestmenu > .active {
    background-color: #e6ded2;
}

.requestmessage {
    background-color: white;
    border-left: 2px solid #e6ded2;
    display: none;
    height: 100%;
    position: absolute;
    width: 70%;
}

.requestheader {
    margin: 20px;
}

.requestcontent {
    margin: 20px;
}

.requestfooter {
    margin: 20px;
}

a:hover {
    cursor: pointer;
    text-decoration: underline;
}

.openedRequest {
    background-color: #222222;
    color: #F8F8F8;
}

select {
    font-family: Helvetica, sans-serif;
    font-size: 16px;
}

textarea {
    border-radius: 12px;
    font-family: Helvetica, sans-serif;
    margin-top: 10px;
    padding: 10px;
}

/*** FOOTER ***/
.footer {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 40px;
    border: 0;
    margin: 0;
    padding: 0;
    outline: none;
    background-color: #F8F8F8;
	font-size: small;
    color: #696965;
    text-align: center;
    font-weight: bold;
    white-space: nowrap;
    overflow-x: auto;
}

hr{
  border: 1pt solid #e6ded2;
}
</style>
</head>
<body>
<div id="Tab" class="tab">
	<div id="logo" style="display:inline-block;" title="Study Group Finder Logo">
		<img class="icons" src="icons/logo.png" alt="Logo" width="60" height="60"/>
	</div>
	<div style="display:inline-block;">
		<h1 style="line-height:80px;display:inline-block;vertical-align:middle;color:#F8F8F8;margin:0;border:0;padding:0;">Study Group Finder</h1>
    </div>
	<div style="position:fixed;left:50%;display:inline-block;transform: translate(-50%);">
		<button id="defaultOpenTab" class="tablinks" title="Home" onclick="openTab(event, 'Home')">
			<img class="icons" src="icons/home.png" alt="Home" width="50" height="50"/>
		</button>
		<button class="tablinks" title="Search" onclick="openTab(event, 'Search')">
			<img class="icons" src="icons/search.png" alt="Search" width="50" height="50"/>
		</button>
		<button class="tablinks" title="Create Group" onclick="openTab(event, 'Create_Group')">
			<img class="icons" src="icons/create_group.png" alt="Create Group" width="50" height="50"/>
		</button>
        <button class="tablinks" title="Requests" onclick="openTab(event, 'Requests')">
			<img class="icons" src="icons/envelope.png" alt="Requests" width="50" height="50"/>
		</button>
		<button id="userprofile" class="tablinks" title="User Profile" onclick="openTab(event, 'User_Profile')">
			<img class="icons" src="icons/user_profile.png" alt="User Profile" width="50" height="50"/>
		</button>
	</div>
    <button id="logout" class="tablinks" title="Logout" onclick="logout()">
        <img class="icons" src="icons/logout.png" alt="Logout" width="50" height="50"/>
    </button>
    <a href="login.html"></a>
</div>

<div id="Home" class="tabcontent">
    <h2>Home</h2>
    
    <!--
    <div id="joinedgroups">
        <h3>News</h3>
        <div id="joined_group_1" class="joined_group" onclick="">
            <p class="joined_group_name">Update am 01.01.2021</p>
        </div>
        <div id="joined_group_2" class="joined_group" onclick="">
            <p class="joined_group_name">Studentische Hilfskraft gesucht!</p>
        </div>
    </div>
    -->
    
    <div id="joinedgroups">
        <h3>Joined Groups</h3>
        <div id="joined_group_1" class="joined_group" onclick="openTab(null, 'Group_Profile');scrollDownToBottom('chat-messages');">
            <p class="joined_group_name">Programmieren I: Scriptkiddies</p>
            <img src="icons/new-message.png" alt="Mail" title="New Messages" class="joined_group_img"/>
        </div>
        <div id="joined_group_2" class="joined_group" onclick="openTab(null, 'Group_Profile');scrollDownToBottom('chat-messages');">
            <p class="joined_group_name">GMCI: Übung Gruppenarbeit</p>
            <img src="icons/new-message.png" alt="Mail" title="New Messages" class="joined_group_img"/>
        </div>
    </div>
    
    <!--
    <div id="joinedgroups">
        <h3>Group Dates</h3>
        <div id="joined_group_1" class="joined_group" onclick="">
            <p class="joined_group_name">Programmieren I: Scriptkiddies: 01.02.2021, 14 Uhr</p>
        </div>
        <div id="joined_group_2" class="joined_group" onclick="">
            <p class="joined_group_name">GMCI: Übung Gruppenarbeit: 02.02.2021, 10 Uhr</p>
        </div>
    </div>
    -->
</div>

<div id="Search" class="tabcontent">
  <h2>Search</h2>
  <form id="searchform" onsubmit="showResults();">
    <div>
      <input id="search" type="text" placeholder="Search..." required>
    </div>
  </form>
    
    <button id="detailedSearch" class="collapsible" onclick="openDetailedSearch()">Detailed Search</button>
    <div id="colcontent" class="collapsiblecontent"><br>
      <div style="width: 65%;max-width: 375px">
      <label for="course"><b>Course</b></label><br>
      <select name="course" style="margin-top:10px;margin-bottom:20px">
        <option value="" disabled selected hidden>Select course...</option>
        <option value="prog1">Programmieren 1</option>
        <option value="prog2">Programmieren 2</option>
        <option value="gmci">Grundlagen der Mensch-Computer-Interaktion</option>
        <option value="gds">Grundlagen digitaler Systeme</option>
        <option value="anaA">Analysis A</option>
        <option value="anaB">Analysis B</option>
      </select>
      
      <label for="groupsizemin"><b>Group size</b></label><br>
      <input id="minGroupSize" type="number" placeholder="Enter min size..." name="groupsizemin" min=1 max=100 onchange="adjustBorders()" style="width:50%;max-width:175px;margin-right:10px;margin-top:10px;margin-bottom:20px">
      <input id="maxGroupSize" type="number" placeholder="Enter max size..." name="groupsizemax" min=1 max=100 onchange="adjustBorders()" style="width:50%;max-width:175px;margin-left:10px;margin-top:10px;margin-bottom:20px">
      
      <label for="semester"><b>Semester founded</b></label><br>
      <select name="semester" style="margin-top:10px;margin-bottom:20px">
        <option value="" disabled selected hidden>Select semester...</option>
        <option value="wise20">WiSe 20/21</option>
        <option value="sose20">SoSe 20</option>
        <option value="wise19">WiSe 19/20</option>
        <option value="sose19">SoSe 19</option>
        <option value="wise18">WiSe 18/19</option>
      </select>
      </div>
    </div>

  <div id="searchresults" style="display:none;background-color:white;padding:10px;margin-top:15px;">
    <h3>Results</h3>
    <table>
      <tr>
        <th>Name</th>
        <th>Course</th>
        <th>Size</th>
        <th>Semester</th>
      </tr>
      <tr>
        <td><button class="group" onclick="toggleRequest()">Programmieren 1 Lerngruppe</button></td>
        <td>Programmieren 1</td>
        <td>14</td>
        <td>WiSe 20/21</td>
      </tr>
      <tr>
        <td><button class="group" onclick="toggleRequest()">Programmieren 2</button></td>
        <td>Programmieren 2</td>
        <td>5</td>
        <td>SoSe 20</td>
      </tr>
      <tr>
        <td><button class="group" onclick="toggleRequest()">Die Programmier-Profis</button></td>
        <td>Programmieren 1</td>
        <td>6</td>
        <td>WiSe 18/19</td>
      </tr>
    </table>
  </div>
  
  <div id="request" class="modal">
    <form id="requestForm" class="modal-content animate" method="post" autocomplete="on" accept-charset="UTF-8">
		<span onclick="toggleRequest()" class="close" title="Close Modal">&times;</span>
		<div class="container" style="line-height:24px;background-color: #FEFEFE;color:#44403f;border-radius: 5px;padding: 10px;margin: 10px 0;">
			<h3>Request for Group: "Programmieren 1 Lerngruppe"</h3>
			<b>Course:</b> Programmieren 1<br>
			<b>Size:</b> 14/20<br>
			<b>Semester:</b> WiSe 20/21<br>
			<b>Description:</b> Suchen motivierte Kommilitonen zum Lernen für Programmieren 1. Wir sind keine Experten, aber stets motiviert!<br><br>
			<label for="reqmessage"><b>Message</b></label>
			<textarea style="height:150px;width:100%;margin-top:15px;margin-bottom:15px;overflow:auto;resize:vertical;border-radius:6px;"></textarea>
			<button id="submitRequest" onclick="document.getElementById('request').style.display='none'"><b>Send Request</b></button><br>
        </div>
    </form>
  </div>
</div>

<div id="Create_Group" class="tabcontent">
    <h2>Create Group</h2>
    <form name="groupform">
        <label for="creategroup_name"><b>Group Name:*</b></label><br>
        <input type="text" class="groupinput" placeholder="Enter Group Name" id="creategroup_name" name="creategroup_name" required><br>
        
        <label for="creategroup_memberlimit"><b>Member Limit:*</b></label>
        <input type="number" id="creategroup_memberlimit" name="creategroup_memberlimit" min="2" max="999" size="4" step="1" required><br>
        
        <label for="creategroup_lecture"><b>Lecture:*</b></label><br>
        <input type="text" list="lectures" class="groupinput" placeholder="Enter Lecture" id="creategroup_lecture" name="creategroup_lecture" required><br>
        <datalist id="lectures">
            <option value="Programmieren I">
            <option value="Programmieren II">
            <option value="Grundlagen der Mensch-Computer-Interaktion">
            <option value="Grundlagen der Software-Technik">
            <option value="Grundlagen der IT-Sicherheit">
            <option value="...">
        </datalist>
        
        <label for="creategroup_requirements"><b>Requirements:</b></label><br>
        <input type="text" class="groupinput" placeholder="Enter Requirements" id="creategroup_requirements" name="creategroup_requirements"><br>
        
        <label for="creategroup_description"><b>Description:</b></label><br>
        <textarea rows="10" cols="100" placeholder="Enter Description" id="creategroup_description" name="creategroup_description" style="border-radius:12px;margin-top:10px;padding:10px;"></textarea><br>
        
        <input type="checkbox" id="creategroup_joinonrequest" name="creategroup_joinonrequest">
        <label for="creategroup_joinonrequest"><b>Join on Request</b></label><br>
        
        <input type="submit" value="Create Group" onclick="createGroup()"> <!-- onsubmit="..." -->
        <input type="reset" value="Reset"><br>
        
        <small>* input required</small>
    </form>
</div>

<div id="Edit_Group" class="tabcontent">
    <h2>Edit Group</h2>
    <form>
        <label for="editgroup_name"><b>Group Name:*</b></label><br>
        <input type="text" class="groupinput" placeholder="Enter Group Name" id="editgroup_name" name="editgroup_name" value="Programmers of tomorrow" required><br>
        
        <label for="editgroup_memberlimit"><b>Member Limit:*</b></label>
        <input type="number" id="editgroup_memberlimit" name="editgroup_memberlimit" min="2" max="999" value="6" size="4" step="1" required><br>
        
        <label for="editgroup_lecture"><b>Lecture:*</b></label><br>
        <input type="text" list="lectures" class="groupinput" placeholder="Enter Lecture" id="editgroup_lecture" name="editgroup_lecture" value="Programmieren 1" required><br>
        
        <label for="editgroup_requirements"><b>Requirements:</b></label><br>
        <input type="text" class="groupinput" placeholder="Enter Requirements" id="editgroup_requirements" name="editgroup_requirements" value="None"><br>
        
        <label for="editgroup_description"><b>Description:</b></label><br>
        <textarea rows="10" cols="100" placeholder="Enter Description" id="editgroup_description" name="editgroup_description" style="border-radius:12px;margin-top:10px;padding:10px;">If u want to work on your Programmieren 1 assignments together this is the right place</textarea><br>
        
        <input type="checkbox" id="editgroup_joinonrequest" name="editgroup_joinonrequest">
        <label for="editgroup_joinonrequest"><b>Join on Request</b></label><br>
        
        <!-- Hinzufügen und Entfernen von Mitgliedern fehlt -->
        
        <!-- kein Back-Button zurück zum Group Profile -->
        
        <!-- <input type="submit" value="Save" onclick="saveGroup()" onsubmit="..."> -->
        <input type="button" value="Save" onclick="saveGroup()">
        <input type="reset" value="Reset">
        <input type="button" class="btn_delete" value="Delete Group" onclick="deleteGroup()"><br>
        
        <small>* input required</small>
    </form>
</div>

<div id="Group_Profile" class="tabcontent">
    <div class="flex-container">
        <div class="group-header">
            <h2>Group: Scriptkiddies</h2>
        </div>
        <img src="icons/settings.png" alt="Edit Group" title="Edit Group" class="settings-icon" width="40" height="40" onclick="openTab(null, 'Edit_Group')"/>
    </div>
    
    <div class="flex-container">
        <div class="sidebar">
            <div class="sidebar-item">
                <div class="sidebar-header">Members 3/6</div>
				<ol>
					<li>You</li>
					<li><button class="members" onclick="toggleProfile()">Hans Wurst</button> <img src="icons/star.png" alt="Group Admin" title="Group Admin" width="10" height="10"/></li>
					<li><button class="members" onclick="toggleProfile()">Joachim Schikele</button></li>
				</ol>
			</div>
            <div class="sidebar-item">
                <div class="sidebar-header">Dates</div>
				<ol id="dateList">
				</ol>
				<button class="add_date_button" id="addDate" onclick="toggleDateForm()">
					<img src="icons/add-date.png" alt="Mail" title="Add date" class="add_date_img icon"/>
                </button>
            </div>
			<div class="sidebar-item">
				<div class="sidebar-header">Files</div>
				<ol id="fileList">
				</ol>
				<button class="add_date_button" id="addFile" onclick="toggleFileForm()">
					<img src="icons/add-date.png" alt="Mail" title="Add date" class="add_date_img icon"/>
                </button>
			</div>
        </div>
        
        <div class="chat">
            <b>Chat</b>
            <div class="chat-messages" id="chat-messages">
                <div class="container">
                    <p><b>You:</b> Hello my name is Thomas.</p>
                    27.12.2020, 11:00
                </div>
                <div class="container darker">
                    <p><b>Hans:</b> has anyone of you heard of stack overflow ?</p>
                    27.12.2020, 11:02
                </div>
                <div class="container darker">
                    <p><b>Joachim:</b> yeah it had a neet fix for my relationship</p>
                    27.12.2020, 11:03
                </div>
            </div>
            <div class="flex-container" style="position:sticky;">
                <input class="chat-text" id="chat-text" type="text" placeholder="Write a message..." onkeyup="onEnterSendMessage(event)"/>
                <button class="chat-button" type="button" onclick="sendText()">Send</button>
			</div>
		</div>
    </div>
	
	<div id="profileModal" class="modal">
		<div class="modal-content animate">
			<span onclick="toggleProfile()" class="close" title="Close Modal">&times;</span>
			<div class="container" style="line-height: 24px;">
				<h3>Profile</h3>
				<img src="icons/user_profile.png" alt="User Avatar" style="width:128px;height:128px;float:left;margin:10px;margin-right:30px;">
				<div style="display:inline-block;">
					<b>Name:</b> Hans Wurst<br>
					<b>University:</b> Leibniz Universität Hannover<br>
					<b>Study Course:</b> Informatik B.Sc.<br>
					<b>Semester:</b> 5<br>
					<b>Email:</b> hans.wurst@stud.uni-hannover.de<br>
					<b>Telephone:</b> +49 511 123456<br>
					<b>Mobile Phone:</b> 0123 456789<br>
					<b>Description:</b> Meine Hobbys sind Reiten, Lesen, Schwimmen.<br>
				</div>
			</div>
		</div>
    </div>
	
	<div id="dateModal" class="modal">
		<div class="modal-content animate">
			<span id="closeDateModal" onclick="closeDate()" class="close" title="Close Modal">&times;</span>
			<div class="container" style="line-height: 24px;">
				<h3>Date</h3>
				<b>Date and Time:</b> <div id="dateAndTimeText" style="display:inline-block;margin:5px 0;">15.1.20, 16:00 Uhr</div><br>
				<b>Description:</b> <div id="descriptionText" style="display:inline-block;margin:5px 0;">Wöchentliches Treffen</div><br><br>
				<button id="deleteDate" class="standard" onclick="deleteDate()">Delete Date</button>
			</div>
		</div>
    </div>
	
	<div id="newDateModal" class="modal">
		<form id="dateForm" class="modal-content animate" onsubmit="addDate()" method="post" autocomplete="on" accept-charset="UTF-8">
			<span onclick="toggleDateForm()" class="close" title="Close Modal">&times;</span>
			<div class="container" style="line-height:24px;background-color: #FEFEFE;color:#44403f;border-radius: 5px;padding: 10px;margin: 10px 0;">
				<h3>Create new date</h3>
				<label for="newDate"><b>Date:</b></label><br>
				<input type="date" id="newDate" required><br>
				<label for="newDateTime"><b>Time:</b></label><br>
				<input type="time" id="newDateTime" required><br>
				<label for="newDateDescription"><b>Description:</b></label><br>
				<input type="text" id="newDateDescription" required><br>
				<input type="submit" id="createNewDate" class="standard" value="Create Date"><br>
			</div>
		</form>
    </div>
	
	<div id="fileModal" class="modal">
		<div class="modal-content animate">
			<span id="closeFileModal" onclick="closeFile()" class="close" title="Close Modal">&times;</span>
			<div class="container" style="line-height: 24px;">
				<h3>File</h3>
				<b>Name:</b> <div id="nameOfFile" style="display:inline-block;margin:5px 0;">xxx</div><br>
				<b>Description:</b> <div id="fileDescription" style="display:inline-block;margin:5px 0;">xxx</div><br><br>
				<button id="downloadFile" class="standard" onclick="downloadFile()">Download File</button>
				<button id="deleteFile" class="standard" onclick="deleteFile()">Delete File</button>
			</div>
		</div>
    </div>
	
	<div id="newFileModal" class="modal">
		<form id="fileForm" class="modal-content animate" onsubmit="addFile()" method="post" autocomplete="on" accept-charset="UTF-8">
			<span onclick="toggleFileForm()" class="close" title="Close Modal">&times;</span>
			<div class="container" style="line-height:24px;background-color: #FEFEFE;color:#44403f;border-radius: 5px;padding: 10px;margin: 10px 0;">
				<h3>Upload new file</h3>
				<label for="newFile"><b>Select a file:</b></label><br>
				<input type="file" id="newFile" style="padding-left: 0;" required><br>
				<label for="newFileDescription"><b>Description:</b></label><br>
				<input type="text" id="newFileDescription" required><br>
				<input type="submit" id="createNewFile" class="standard" value="Upload file"><br>
			</div>
		</form>
    </div>
</div>

<div id="Requests" class="tabcontent">
    <h2>Requests</h2>
    <!-- <input type="button" id="requests_all_btn" class="requests_btn" value="all" onclick="showInbox(event, 'all')"> -->
    <input type="button" id="requests_sent_btn" class="requests_btn" value="sent" onclick="showInbox(event, 'sent')">
    <input type="button" id="requests_received_btn" class="requests_btn" value="received" onclick="showInbox(event, 'received')">
    
    <div style="border:2px solid #e6ded2;border-radius:12px;background-color:#F8F8F8;white-space:nowrap;overflow-x:auto;position:relative;">
        <div class="requestmenu">
            <!-- Sent Inbox -->
            <div id="defaultOpenRequestItemSent" class="requestitem sent">
                Sent join-request to "Programmieren I: Scriptkiddies" (not received)
            </div>
            <div class="requestitem sent">
                Sent join-request to "Programmieren II: Hackermen" (received, unread)
            </div>
            <div class="requestitem sent">
                Sent join-request to "GMCI: Übung Gruppenarbeit" (read, in progress)
            </div>
            <div class="requestitem sent">
                Sent join-request to "GDS: Klausurvorbereitung" (accepted)
            </div>
            <div class="requestitem sent">
                Sent join-request to "Analysis B: Tutoren" (rejected)
            </div>
            <div class="requestitem sent">
                Sent join-request to "Programmieren I: Scriptkiddies" (not received)
            </div>
            <div class="requestitem sent">
                Sent join-request to "Programmieren II: Hackermen" (received, unread)
            </div>
            <div class="requestitem sent">
                Sent join-request to "GMCI: Übung Gruppenarbeit" (read, in progress)
            </div>
            <div class="requestitem sent">
                Sent join-request to "GDS: Klausurvorbereitung" (accepted)
            </div>
            <div class="requestitem sent">
                Sent join-request to "Analysis B: Tutoren" (rejected)
            </div>
            
            <!-- Received Inbox -->
            <div id="defaultOpenRequestItemReceived" class="requestitem received">
                Received request from Hans Wurst to join "Programmieren I: Scriptkiddies"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "Programmieren II: Hackermen"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "GMCI: Übung Gruppenarbeit"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "GDS: Klausurvorbereitung"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "Analysis B: Tutoren"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "Programmieren I: Scriptkiddies"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "Programmieren II: Hackermen"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "GMCI: Übung Gruppenarbeit"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "GDS: Klausurvorbereitung"
            </div>
            <div class="requestitem received">
                Received request from Hans Wurst to join "Analysis B: Tutoren"
            </div>
        </div>
        
        <div class="requestmessage">
            <div class="requestheader">
                <h3>Join-request</h3>
                <label><b>sent from:</b></label> <span id="requestsender"><a onclick="openTab(null, 'User_Profile')">Hans Wurst</a></span><br>
                <label><b>to:</b></label> <span id="requestreceiver"><a onclick="openTab(null, 'Group_Profile')">Programmieren I: Scriptkiddies</a></span>
            </div>
            <hr>
            <div class="requestcontent">
                <label><b>Message:</b></label><br>
                <p id="requestmessage">Hey guys! I wanna join your group.</p>
            </div>
            <hr>
            <div class="requestfooter">
                <input type="button" id="requests_accept_btn" value="Accept" onclick="removeRequestItem()">
                <input type="button" id="requests_reject_btn" value="Reject" onclick="removeRequestItem()">
                <input type="button" id="requests_cancel_btn" value="Cancel" onclick="removeRequestItem()">
            </div>
        </div>
    </div>
</div>

<div id="User_Profile" class="tabcontent">
    <h2>User Profile</h2>
    <input type="button" id="defaultOpenFieldset" class="fset_btn" value="Personal Data" onclick="showFieldset(event, 'person')">
    <input type="button" class="fset_btn" value="Studies" onclick="showFieldset(event, 'studies')">
    <input type="button" class="fset_btn" value="Contact Details" onclick="showFieldset(event, 'contact')">
    <input type="button" class="fset_btn" value="Address" onclick="showFieldset(event, 'address')">
    
    <img id="avatar" src="icons/user_profile.png" alt="User Avatar" style="width:128px;height:128px;float:left;margin:10px;" onmouseover="show('avatar_svg')">
    <svg id="avatar_svg" height="150" width="150" style="position:absolute;left:35px;top:160px;cursor:pointer;display:none;" onclick="openFileDialog()" onmouseleave="hide('avatar_svg')">
        <!-- drag & drop? -->
        <circle cx="71" cy="71" r="70" stroke="black" stroke-width="1" fill="rgba(200,200,200,0.5)"/>
        Sorry, your browser does not support inline SVG.
    </svg>
    <input type="file" id="avatar_upload" name="avatar_upload" style="display:none;" onchange="setAvatar(evt)">
    
    <form method="post" autocomplete="on" accept-charset="UTF-8"> <!--action="/user_profile.php" target="_self"-->
        <fieldset id="person" class="fset_page">
            <label for="user_name"><b>Name:*</b></label><br>
            <input type="text" id="user_name" name="user_name" value="Hans Wurst" size="30" required><br>
            <label for="user_birthday"><b>Birthday:*</b></label><br>
            <input type="date" id="user_birthday" name="birthday" value="1996-04-15" onchange="setAge(this.value)" required>
            <span id="user_age" name="user_age" style="margin:10px;"></span><br>
            <label><b>Sex:*</b></label><br>
            <fieldset style="background-color:white;display:block;margin-top:10px;">
                <input type="radio" id="male" name="sex" value="male" checked>
                <label for="male">Male</label>
                <input type="radio" id="female" name="sex" value="female">
                <label for="female">Female</label>
                <input type="radio" id="other" name="sex" value="other">
                <label for="other">Other</label>
            </fieldset>
        </fieldset>
        
        <fieldset id="studies" class="fset_page">
            <label for="user_university"><b>University:*</b></label><br>
            <input type="text" list="universities" id="user_university" name="user_university" value="Leibniz Universität Hannover" size="30" required><br>
            <datalist id="universities">
                <option value="Leibniz Universität Hannover">
                <option value="Medizinische Hochschule Hannover">
                <option value="Tierärztliche Hochschule Hannover">
                <option value="Hochschule Hannover">
                <option value="Hochschule für Musik, Theater und Medien Hannover">
                <option value="...">
            </datalist>
            <label for="user_studycourse"><b>Study Course:*</b></label><br>
            <input type="text" list="studycourses" id="user_studycourse" name="user_studycourse" value="Informatik B.Sc." size="30" required><br>
            <datalist id="studycourses">
                <option value="Informatik B.Sc.">
                <option value="Informatik M.Sc.">
                <option value="Technische Informatik B.Sc.">
                <option value="Technische Informatik M.Sc.">
                <option value="Elektrotechnik und Informationstechnik B.Sc.">
                <option value="Elektrotechnik und Informationstechnik M.Sc.">
                <option value="Energietechnik B.Sc.">
                <option value="Energietechnik M.Sc.">
                <option value="Mechatronik B.Sc.">
                <option value="...">
            </datalist>
            <label for="user_studystart"><b>Study Start:*</b></label><br>
            <input type="date" id="user_studystart" name="studystart" value="2018-10-01" onchange="setMaxSemester(this.value)" required><br>
            <label for="user_semester"><b>Semester:</b></label>
            <input type="number" id="user_semester" name="user_semester" min="1" max="99" size="3" step="1" value="5">
        </fieldset>
        
        <fieldset id="contact" class="fset_page">
            <label for="user_email"><b>Email:*</b></label><br>
            <input type="email" id="user_email" name="user_email" value="hans.wurst@stud.uni-hannover.de" size="30" required><br>
            <label for="user_phone"><b>Telephone:</b></label><br>
            <input type="tel" id="user_phone" name="user_phone" value="+49 511 123456" size="30"><br><!-- pattern=""-->
            <label for="user_mobile"><b>Mobile Phone:</b></label><br>
            <input type="tel" id="user_mobile" name="user_mobile" value="0123 456789" size="30"><!-- pattern=""-->
            <label for="user_homepage"><b>Homepage:</b></label><br>
            <input type="url" id="user_homepage" name="user_homepage" value="https://www.hans-wurst.de" size="30">
        </fieldset>
        
        <fieldset id="address" class="fset_page">
            <label for="user_streetaddress"><b>Street Address:</b></label>
            <input type="text" id="user_streetaddress" name="user_streetaddress" value="Welfengarten 1" size="30"><br>
            <label for="user_city"><b>City:</b></label>
            <input type="text" id="user_city" name="user_city" value="Hannover" size="30"><br>
            <label for="user_postalcode"><b>Postal Code:</b></label>
            <input type="text" id="user_postalcode" name="user_postalcode" value="30167" size="5"><br>
            <label for="user_federalstate"><b>Federal State:</b></label><br>
            <input type="text" id="user_federalstate" name="user_federalstate" value="Niedersachsen" size="30"><br>
            <label for="user_country"><b>Country:</b></label><br>
            <input type="text" id="user_country" name="user_country" value="Deutschland" size="30">
            
            <!-- Social Media... facebook, instagram, twitter etc. -->
        </fieldset>
        
        <div style="clear:both;">
            <label for="user_description"><big><b>Description:</b></big></label><br>
            <textarea rows="10" cols="100"id="user_description" name="user_description" style="border-radius:12px;margin-top:10px;padding:10px;">Meine Hobbys sind Reiten, Lesen, Schwimmen.</textarea><br>
            
            <input type="submit" value="Save" onclick="saveUserProfile()">
            <input type="reset" value="Reset">
            <input type="button" class="btn_delete" value="Delete Account" onclick="deleteAccount()"><br>
            <a href="login.html" id="link_login"></a>
            
            <small>* input required</small>
        </div>
    </form>
</div>

<div class="footer">
    <p style="margin:0px;padding:0px;display:inline-block;">Copyright © 2021 by CopyCats</p>
    <span style="display:inline-block;position:relative;top:7px;"><img src="icons/cat.png" alt="Cat" title="Copycats" class="cat-icon"/></span>
</div>

<script src="js/main.js"></script>
<script>
//// GENERAL ////
// open tabcontent by tabName
function openTab(evt, tabName) {
    var tabcontents = document.getElementsByClassName("tabcontent");
    for (var i = 0; i < tabcontents.length; ++i) {
        tabcontents[i].style.display = "none";
    }
    
    var tablinks = document.getElementsByClassName("tablinks");
    for (var i = 0; i < tablinks.length; ++i) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    
    document.getElementById(tabName).style.display = "block";
    if (evt != null && evt != undefined) {
        evt.currentTarget.className += " active";
    }
}

// Show hometab by default
function showHome() {
    document.getElementById("defaultOpenTab").click();
}
showHome();

// When the user clicks anywhere outside of a modal, close it
window.onclick = function(event) {
  if (event.target == request) {
    request.style.display = "none";
  }
  if (event.target == profileModal) {
    profileModal.style.display = "none";
  }
  if (event.target == dateModal) {
	dateModal.style.display = "none";
  }
  if (event.target == newDateModal) {
    newDateModal.style.display = "none";
  }
  if (event.target == fileModal) {
	fileModal.style.display = "none";
  }
  if (event.target == newFileModal) {
    newFileModal.style.display = "none";
  }
}

// logout current user
function logout() {
    // note logout in database and cookies...
    document.getElementById("link_login").click();
}

//// HOME ////
// Add code here...

//// SEARCH ////
function openDetailedSearch() {
  var content = document.getElementById("colcontent");
  if (content.style.display === "block") {
    content.style.display = "none";
  } else {
    content.style.display = "block";
  }
}

function showResults() {
  document.getElementById("searchresults").style.display = "block";
}

function adjustBorders() {
  var min = document.getElementById("minGroupSize");
  var max = document.getElementById("maxGroupSize");
  min.setAttribute("max",max.value);
  max.setAttribute("min",min.value);
  if (min.value > min.max) {
    min.setAttribute("value", min.max);
  }
  if (max.value < max.min) {
    max.setAttribute("value", max.min);
  }
}

function toggleRequest() {
  var content = document.getElementById("request");
  if (content.style.display === "block") {
    content.style.display = "none";
  } else {
    content.style.display = "block";
  }
}

var form = document.getElementById("searchform");
function handleForm(event) { event.preventDefault(); }
form.addEventListener('submit', handleForm);

var form = document.getElementById("requestForm");
function handleForm(event) { event.preventDefault(); }
form.addEventListener('submit', handleForm);

//// GROUP PROFILE ////
function toggleProfile() {
  var content = document.getElementById("profileModal");
  if (content.style.display === "block") {
    content.style.display = "none";
  } else {
    content.style.display = "block";
  }
}

var selectedDateIndex = 0;
function openDate(event) {
  selectedDateIndex = event.target.parentNode.getAttribute("value");
  var selectedDate = dates[selectedDateIndex];
  document.getElementById("dateAndTimeText").innerHTML = changeDateFormat(selectedDate.date) + ", " + selectedDate.time;
  document.getElementById("descriptionText").innerHTML = selectedDate.description;
  document.getElementById("dateModal").style.display = "block";
}

function closeDate() {
  document.getElementById("dateModal").style.display = "none";
}

function toggleDateForm() {
  var content = document.getElementById("newDateModal");
  if (content.style.display === "block") {
    content.style.display = "none";
  } else {
    content.style.display = "block";
  }
}

var dateForm = document.getElementById("dateForm");
function handleForm(event) { event.preventDefault(); }
dateForm.addEventListener('submit', handleForm);

var dates = [{date:"2021-01-30",description:"Zusätzliches Treffen",time:"19:00"}, {date:"2021-01-22",description:"Wöchentliches Treffen",time:"16:00"}, {date:"2021-01-29",description:"Wöchentliches Treffen",time:"16:00"}];

function updateDates() {
  document.getElementById("dateList").innerHTML = "";
  sortDateList();
  var d;
  var i = 0;
  for (d of dates) {
    var newDate = document.createElement("LI");
	newDate.setAttribute("value",i);
    var newButton = document.createElement("BUTTON");
    newButton.setAttribute("class","members");
    newButton.setAttribute("onclick","openDate(event)");
    newButton.innerHTML = changeDateFormat(d.date);
    newDate.appendChild(newButton);
    document.getElementById("dateList").appendChild(newDate);
	i++;
  }
}
updateDates();

function addDate() {
  toggleDateForm();
  var date = document.getElementById("newDate").value;
  var description = document.getElementById("newDateDescription").value;
  var time = document.getElementById("newDateTime").value;
  dates.push({date:date,description:description,time:time});
  updateDates();
}

function changeDateFormat(str) {
	return str.substr(8, 2) + '.' + str.substr(5, 2) + '.' + str.substr(2, 2);
}

function deleteDate() {
  var answer = window.confirm("Are you sure that you want to delete this date?\nThis action can not be undone.");
  if (answer) {
    fileModal.style.display = "none";
    if (selectedDateIndex > -1) {
	  dates.splice(selectedDateIndex, 1);
    }
    updateDates();
  }
}

function compareDates(a, b) {
  if (a.date < b.date){
    return -1;
  }
  if (a.date > b.date){
    return 1;
  }
  if (a.time < b.time){
    return -1;
  }
  if (a.time > b.time){
    return 1;
  }
  return 0;
}

function sortDateList() {
  dates.sort(compareDates);
}

var selectedFileIndex = 0;
function openFile(event) {
  selectedFileIndex = event.target.parentNode.getAttribute("value");
  var selectedFile = files[selectedFileIndex];
  document.getElementById("nameOfFile").innerHTML = selectedFile.filename;
  document.getElementById("fileDescription").innerHTML = selectedFile.description;
  document.getElementById("fileModal").style.display = "block";
}

function closeFile() {
  document.getElementById("fileModal").style.display = "none";
}

function toggleFileForm() {
  var content = document.getElementById("newFileModal");
  if (content.style.display === "block") {
    content.style.display = "none";
  } else {
    content.style.display = "block";
  }
}

var fileForm = document.getElementById("fileForm");
function handleForm(event) { event.preventDefault(); }
fileForm.addEventListener('submit', handleForm);

var files = [{filename:"Aufgabenblatt10.pdf",description:"Abgabe bis zum 25.01"},{filename:"Aufgabenblatt09_Lösung.pdf",description:"Noch unvollständig"},{filename:"quicksort.c",description:"C-Implementation von Quicksort"}];

function updateFiles() {
  document.getElementById("fileList").innerHTML = "";
  var f;
  var i = 0;
  for (f of files) {
    var newFile = document.createElement("LI");
	newFile.setAttribute("value",i);
    var newButton = document.createElement("BUTTON");
    newButton.setAttribute("class","members");
    newButton.setAttribute("onclick","openFile(event)");
    newButton.innerHTML = f.filename;
    newFile.appendChild(newButton);
    document.getElementById("fileList").appendChild(newFile);
	i++;
  }
}
updateFiles();

function addFile() {
  toggleFileForm();
  var filename = document.getElementById("newFile").value.split('\\').pop();;
  var description = document.getElementById("newFileDescription").value;
  files.push({filename:filename,description:description});
  updateFiles();
}

function deleteFile() {
  var answer = window.confirm("Are you sure that you want to delete this file?\nThis action can not be undone.");
  if (answer) {
    fileModal.style.display = "none";
    if (selectedFileIndex > -1) {
	  files.splice(selectedFileIndex, 1);
    }
    updateFiles();
  }
}

function downloadFile() {
  // closeFile();
  // download file...
}

function deleteGroup() {
    var answer = window.confirm("Are you sure that you want to delete your group?\nOnce your group has been deleted, you won't be able to restore it.");
    
    if (answer) {
        // delete group in database...
        hide("joined_group_1");
        showHome();
    }
}

function onEnterSendMessage(evt) {
    // check which key was pressed
    if (evt.key === "Enter") {
        sendText();
    }
}

function sendText(){
    var chatText = document.getElementById("chat-text");
    var inputText = chatText.value;
    if (inputText == "") {
        return false;
    }
    
    var chatmessages = document.getElementById("chat-messages");
    var newmessage = document.createElement("div");
    
    newmessage.classList.add("container");
    newmessage.style.display = "block";
    var date = new Date();
    var time = date.toLocaleTimeString('de-DE', { hour: "numeric", minute: "numeric" });
    date = date.toLocaleDateString('de-DE', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    
    newmessage.innerHTML = '<p><b>You: </b>' + inputText + '</p>' + date + ", " + time;
    chatmessages.append(newmessage);
    chatText.value = "";
    
    scrollDownToBottom("chat-messages");
}

function scrollDownToBottom(id) {
    var element = document.getElementById(id);
    element.scrollTo(0, element.scrollHeight);
}

function scrollUpToTop(id) {
    var element = document.getElementById(id);
    element.scrollTo(0, 0);
}


//// CREATE GROUP ////
function createGroup() {
    // create group in database...
    openTab(null, "Group_Profile");
}

function saveGroup() {
    // save group in database...
    openTab(null, "Group_Profile");
}


//// REQUESTS ////
function showInbox(evt, inboxName) {
    // highlight selected inbox
    var req_btns = document.getElementsByClassName("requests_btn");
    for (var i = 0; i < req_btns.length; ++i) {
        req_btns[i].className = req_btns[i].className.replace(" active", "");
    }
    
    // select inbox items
    var reqitems_sent = document.getElementsByClassName("sent");
    var reqitems_received = document.getElementsByClassName("received");
    if (inboxName == "sent") {
        for (var i = 0; i < reqitems_sent.length; ++i) {
            reqitems_sent[i].style.display = "block";
        }
        for (var i = 0; i < reqitems_received.length; ++i) {
            reqitems_received[i].style.display = "none";
        }
        
        document.getElementById("requests_accept_btn").style.display = "none";
        document.getElementById("requests_reject_btn").style.display = "none";
        document.getElementById("requests_cancel_btn").style.display = "inline-block";
    } else if (inboxName == "received") {
        for (var i = 0; i < reqitems_sent.length; ++i) {
            reqitems_sent[i].style.display = "none";
        }
        for (var i = 0; i < reqitems_received.length; ++i) {
            reqitems_received[i].style.display = "block";
        }
        
        document.getElementById("requests_accept_btn").style.display = "inline-block";
        document.getElementById("requests_reject_btn").style.display = "inline-block";
        document.getElementById("requests_cancel_btn").style.display = "none";
    }
    
    evt.currentTarget.className += " active";
    var reqfirst = document.getElementsByClassName("requestmenu")[0].getElementsByClassName(inboxName);
    if (reqfirst.length >= 1) {
        reqfirst[0].click();
    }
    
    // scroll up to top?
}

function showRequest(evt) {
    // fill header+content with sender, receiving group and message...
    
    var reqitems = document.getElementsByClassName("requestitem");
    for (var i = 0; i < reqitems.length; ++i) {
        reqitems[i].className = reqitems[i].className.replace(" active", "");
    }
    
    evt.currentTarget.className += " active";
    document.getElementsByClassName("requestmessage")[0].style.display = "inline-block";
}

var reqitems = document.getElementsByClassName("requestitem");
for (var i = 0; i < reqitems.length; ++i) {
    reqitems[i].onclick = function (event) {
        showRequest(event);
    };
}
document.getElementById("requests_sent_btn").click();

// after accept, reject or cancel
function removeRequestItem() {
    var reqmenu = document.getElementsByClassName("requestmenu")[0];
    reqmenu.getElementsByClassName("active")[0].remove();
    document.getElementsByClassName("requestmessage")[0].style.display = "none";
    
    // select next requestitem in the list depending on inbox?
    //reqmenu.getElementsByClassName("sent")[0].click();
}

//// USER PROFILE ////
function openFileDialog() {
    var file = document.getElementById('avatar_upload');
    file.click();
    
    /*
    img.src = <path_to_image>;
    alert(file.name + ": " + file.value + ", " + file.size + ", " + file.type);
    alert(file.files[0].name);
    */
}

function setAvatar(evt) {
    // update avatar
}

function showFieldset(evt, fsetName) {
    var fset_btns = document.getElementsByClassName("fset_btn");
    var fset_pages = document.getElementsByClassName("fset_page");
    for (var i = 0; i < fset_pages.length; ++i) {
        fset_btns[i].className = fset_btns[i].className.replace(" active", "");
        fset_pages[i].style.display = "none";
    }
    
    evt.currentTarget.className += " active";
    show(fsetName);
}
document.getElementById("defaultOpenFieldset").click();

// calculate the current age of user
function setAge(birthDate) {
    var currentDate = new Date(),
        birthDate = new Date(birthDate),
        age = currentDate.getFullYear() - birthDate.getFullYear();
    
    if (currentDate.getMonth() < birthDate.getMonth() || (currentDate.getMonth() == birthDate.getMonth() && currentDate.getDate() < birthDate.getDate())) {
        --age;
    }
    
    document.getElementById("user_age").innerHTML = "<b>Age: </b>" + age;
}
var birthDate = document.getElementById("user_birthday");
if (birthDate.value != "") {
    setAge(birthDate.value);
}

// calculate the max. possible semester depending on study start
function setMaxSemester(studystart) {
    var currentDate = new Date();
    var studystart = new Date(studystart);
    var months = (currentDate.getFullYear() - studystart.getFullYear()) * 12;
    months -= studystart.getMonth();
    months += currentDate.getMonth() + 1;
    
    document.getElementById("user_semester").max = Math.ceil(months / 6);
}
var studystart = document.getElementById("user_studystart");
if (studystart.value != "") {
    setMaxSemester(studystart.value);
}

function saveUserProfile() {
    // save user profile changes in database...
    window.alert("Your user profile changes have been saved.");
}

function deleteAccount() {
    var answer = window.confirm("Are you sure that you want to delete your account?\nOnce your account has been deleted, you won't be able to restore it.");
    
    if (answer) {
        // delete account in database...
        logout();
    }
}
</script>
</body>
</html>